entry:
  - name: test_entry
    enabled: true
    router: default
    max_concurrency: 20000
    network:
      binding: 0.0.0.0:8000

router:
  - name: default
    default_flow: test

flow:
  - name: test
    filter:
      - request_path_limiter:
          message: "Hey, You just reached our request limit!"
          log_warn_message: true
          rules:
            - pattern: "/(?P<index_name>medcl)/_search"
              max_qps: 1
              group: index_name
            - pattern: "/(?P<index_name>.*?)/_search"
              max_qps: 2345
              group: index_name
      - elasticsearch:
          elasticsearch: test_cluster

elasticsearch:
  - name: test_cluster
    enabled: true
    endpoints:
      - http://localhost:9200
    discovery:
      enabled: false

#curl localhost:8000/medcl/_search -v
#curl localhost:8000/abc/_search -v
