path.data: data
path.logs: log

entry:
  - name: my_es_entry
    enabled: true
    router: my_router
    max_concurrency: 200000
    network:
      binding: 0.0.0.0:8000

flow:
  - name: default
    filter:
      - echo:
          message: "hello default flow"
      - http:
          schema: "http"
          hosts:
            - "localhost:9200"
  - name: hcy-async-indexing
    filter:
      - echo:
         message: "enter hcy-async-indexing"
      - http:
          schema: "http"
          hosts:
            - "localhost:8088"
            #- "gw1:8001"
      - drop:
  - name: bulk_flow
    filter:
      - flow:
          when:
            and:
              - contains:
                  _ctx.request.path: /_bulk
              - prefix:
                  _ctx.request.host: 165ed1e903914b929746c642d92b5a21
          flows:
            - hcy-async-indexing
      - flow:
          flows:
            - default
router:
  - name: my_router
    default_flow: default
    rules:
      - method:
          - "*"
        pattern:
          - "/_bulk"
          - "/{any_index}/_bulk"
        flow:
          - bulk_flow