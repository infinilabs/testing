path.data: data
path.logs: log

entry:
  - name: my_es_entry
    enabled: true
    router: my_router
    max_concurrency: 2000
    network:
      binding: 0.0.0.0:8000

flow:
  - name: test
    filter:
      - request_user_filter:
          include:
            - "elastic"
          action: deny
          status: 403
          message: "request was denied by request user filter"
      - echo:
          message: "hello world !"

router:
  - name: my_router
    default_flow: test

#  curl localhost:8000 -u elastic:xxx
#  response: hello world !

#  curl localhost:8000 -u logstash:xxx
#  {"error":true,"message":"request was denied by request user filter"}