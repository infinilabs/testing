path.data: data
path.logs: log

stats:
  enabled: false

entry:
  - name: my_es_entry
    enabled: true
    router: my_router
    max_concurrency: 10000
    network:
      binding: $[[gateway.endpoint]]

flow:
  - name: es-flow
    filter:
      - elasticsearch:
          elasticsearch: es-server
  - name: es-cache-flow
    filter:
      - get_cache:
      - elasticsearch:
          elasticsearch: es-server
      - set_cache:

router:
  - name: my_router
    default_flow: es-flow
    rules:
      - method:
          - "GET"
          - "HEAD"
        pattern:
          - "/"
          - "/_search"
          - "/{any_index}/_search"
        flow:
          - es-cache-flow

elasticsearch:
  - name: es-server
    enabled: true
    endpoints:
     - $[[elasticsearch.endpoint]]
